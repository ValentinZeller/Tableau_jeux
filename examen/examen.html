<!DOCTYPE html>
<html>
	<head>
		<title>Modifier une zone de test</title>
		<meta charset= "utf-8" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
		<link rel="stylesheet" href="CSS/style.css" type="text/css" />
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-sm" id="dom"></div>
				<div class="col-sm"><h1 id="zone_test">Zone de test</h1></div>
			</div>
		</div>
		


		<script>
			formData = [{name:"backgroundColor",type:"range",min:0,max:255},
						{name:"padding",type:"range",min:0,max:30},
						{name:"width",type:"range",min:0,max:200},
						{name:"height",type:"range",min:0,max:200},
						{name:"border-radius",type:"range",min:0,max:30},
						{name:"rotation",type:"range",min:0,max:180}];
			
				function createLabel(name,parent) {
				label = document.createElement('label');
				label.setAttribute('for',name);
				node = document.createTextNode(name + " : ");
				label.appendChild(node);

				parent.appendChild(label);
			}

			function changeZone(event) {
				switch (event.target.name) {
					case 'backgroundColor':
						zone_test.style.backgroundColor = "rgb("+event.target.value+","+event.target.value+","+event.target.value+")";
						break;
	
					case 'rotation':
						zone_test.style.transform = "rotate("+event.target.value+"deg)";
						break;
					default:
						zone_test.style.setProperty(event.target.name,event.target.value+"px");
						break;
				}
			}

			function createInput(element) {
				input = document.createElement('input');
				input.setAttribute('id',element.name);
				input.setAttribute('name',element.name);
				input.setAttribute('type',element.type);
				input.setAttribute('required','true');
				if (element.type == 'range') {
					input.setAttribute('min',element.min);
					input.setAttribute('max',element.max);
					input.setAttribute('class','form-control-Range')
				} 
				return input;
			}
			
			function generateForm(array) {
				//form
				form = document.createElement('form');
				form.setAttribute('action','');
				form.setAttribute('method','get');
				form.setAttribute('id','form');


				//Div form group pour CSS
				formGroup = document.createElement('div');
				formGroup.setAttribute('class','form-group');

				form.appendChild(formGroup);


				Object.values(formData).forEach( element => {
					div  = document.createElement('div');
					div.setAttribute('class','form-element');
					
					createLabel(element.name,div);
					input = createInput(element);
					//input.addEventListener('input',changeZone,false);
					div.appendChild(input);
					formGroup.appendChild(div);
					document.getElementById('dom').appendChild(form);
				});
			}

			document.addEventListener('input',changeZone);
			
			generateForm(formData);

		zone_test = document.getElementById('zone_test');
		</script>
	</body>
</html>
